(this.webpackJsonppelp=this.webpackJsonppelp||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"registerValidation",(function(){return H})),n.d(a,"loginValidation",(function(){return J})),n.d(a,"restaurantValidation",(function(){return M})),n.d(a,"reviewValidation",(function(){return Y}));var r,c=n(1),s=n.n(c),i=n(18),u=n.n(i),o=(n(39),n(8)),l=n(5),d=(n(40),n(19)),j=(n(41),n(0)),p=function(){return Object(j.jsx)("div",{className:"header",style:Object(d.a)({},"--color-inject","".concat("hsl(200, 20%, 20%)")),children:"Rate Restaurant"})},b=n(3),m=n.n(b),h=n(6),f=n(4),O=n(2),x="https://pern-y.herokuapp.com/api/v1";!function(e){e.ADD_RESTAURANT="ADD_RESTAURANT",e.REMOVE_RESTAURANT="REMOVE_RESTAURANT",e.FETCH_RESTAURANTS="FETCH_RESTAURANTS",e.NULL_RESTAURANT=""}(r||(r={}));var v=n(27),g=function(e,t){switch(t.type){case r.ADD_RESTAURANT:var n=t.payload,a=n.id,c=n.location,s=n.name,i=n.priceRange,u=n.average;return[].concat(Object(v.a)(e),[{id:a,name:s,location:c,priceRange:i,average:u}]);case r.REMOVE_RESTAURANT:return Object(v.a)(e.filter((function(e){return e.id!==t.payload})));case r.FETCH_RESTAURANTS:return t.payload;default:return e}},w=function(e,t){switch(t.type){case"ADD_USER":return t.payload;default:return e}},y={restaurants:[],user:{name:"",email:"",isAuth:!1}},N=function(e,t){var n=e.restaurants,a=e.user;return{restaurants:g(n,t),user:w(a,t)}},S=s.a.createContext({state:y,dispatch:function(){return null}}),A=function(e){var t=e.children,n=s.a.useReducer(N,y),a=Object(O.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(S.Provider,{value:{state:r,dispatch:c},children:t})};A.defaultProps={children:null};var k=function(e,t,n){var a=window.localStorage.getItem("token");return fetch("".concat(x,"/restaurants"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(a)},body:JSON.stringify({name:e,location:t,price_range:n})})},R=function(){return fetch("".concat(x,"/restaurants"))},T=function(e){var t=e.trim(),n=t[0];return t.length<2?t.toUpperCase():"".concat(n.toUpperCase()).concat(t.slice(1))},E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return""===e}))},C=function(e,t,n,a){var r=window.localStorage.getItem("token");return fetch("".concat(x,"/restaurants/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(r)},body:JSON.stringify({name:t,location:n,price_range:a})})},D=function(e){var t=window.localStorage.getItem("token");return fetch("".concat(x,"/restaurants/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(t)}})},U=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.fetch("".concat(x,"/reviews/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t,n,a){return fetch("".concat(x,"/reviews/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({name:t,rating:n,comment:a})})},_=n(14),I=function(e){return{position:_.c.POSITION.BOTTOM_CENTER,onClose:function(){return e()},autoClose:2e3,pauseOnHover:!1,hideProgressBar:!0,style:{fontSize:"1rem",padding:"0.2rem",width:"80%",marginLeft:"10%"}}},P=function(e,t,n){return fetch("".concat(x,"/auth/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({name:e,email:t,password:n})})},L=function(e,t){return fetch("".concat(x,"/auth/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({email:e,password:t})})},V=function(){var e=window.localStorage.getItem("token");return fetch("".concat(x,"/dashboard"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(e)}})},q=function(e){return fetch("".concat(x,"/restaurants/").concat(e))},z=n(9),B=n.n(z),H=B.a.object({name:B.a.string().trim().min(5).max(15).regex(/^[a-zA-Z0-9]+$/).message("Name can only contain alphanumeric characters!").required(),email:B.a.string().trim().email({tlds:{allow:!1}}).required(),password:B.a.string().trim().min(8).max(20).required()}),J=B.a.object({email:B.a.string().trim().email({tlds:{allow:!1}}).required(),password:B.a.string().trim().min(8).max(20).required()}),M=B.a.object({restaurantName:B.a.string().trim().min(3).max(40).required().label("restaurant name"),restaurantLocation:B.a.string().trim().min(3).max(40).required().label("restaurant location"),restaurantPrice:B.a.number().min(1).max(5).required().label("restaurant price")}),Y=B.a.object({username:B.a.string().trim().min(3).max(40).required(),userRating:B.a.string().trim().max(1).required().label("rating"),comment:B.a.string().trim().min(10).max(100).required()}),W=(n(63),a.restaurantValidation),$=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(O.a)(s,2),u=i[0],o=i[1],l=Object(c.useState)(""),d=Object(O.a)(l,2),p=d[0],b=d[1],x=Object(c.useState)(""),v=Object(O.a)(x,2),g=v[0],w=v[1],y=Object(c.useContext)(S).dispatch,N=function(){var e=Object(f.a)(m.a.mark((function e(t){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,W.validateAsync({restaurantName:n,restaurantLocation:u,restaurantPrice:p});case 4:return e.next=6,k(T(n),T(u),parseInt(p,10));case 6:if(201!==(c=e.sent).status){e.next=12;break}return e.next=10,c.json();case 10:s=e.sent,y({type:r.ADD_RESTAURANT,payload:Object(h.a)({},s)});case 12:b(""),a(""),o(""),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),w(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{"data-testid":"res-add-form",className:"add-restaurant-form",onSubmit:function(e){return N(e)},children:[Object(j.jsx)("input",{"data-testid":"res-name-input",type:"text",name:"restaurant-name",id:"restaurant-name",value:n,onChange:function(e){return a(e.target.value)},onFocus:function(){return w("")},placeholder:"Name"}),Object(j.jsx)("input",{"data-testid":"res-location-input",type:"text",name:"restaurant-location",id:"restaurant-location",value:u,onChange:function(e){return o(e.target.value)},onFocus:function(){return w("")},placeholder:"Location"}),Object(j.jsx)("input",{"data-testid":"res-price-input",type:"text",name:"restaurant-price",id:"restaurant-price",value:p,onChange:function(e){return b(e.target.value)},onFocus:function(){return w("")},placeholder:"Price"}),g&&Object(j.jsx)(Oe,{message:g}),Object(j.jsx)("button",{type:"submit",children:"Add Restaurant"})]})})},G=(n(64),n(65),n(13)),K=n.p+"static/media/rest.256d1806.jpg",Z=function(e){var t=e.restaurant,n=e.isAuth,a=t.id,s=t.name,i=t.location,u=t.priceRange,o=t.average,d=Object(l.f)(),p=Object(c.useContext)(S).dispatch,b=Object(c.useState)(""),h=Object(O.a)(b,2),x=h[0],v=h[1],g=function(){var e=Object(f.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,e.next=4,D(n);case 4:if(204!==e.sent.status){e.next=9;break}p({type:r.REMOVE_RESTAURANT,payload:n}),e.next=10;break;case 9:return e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),v(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){d.push("/restaurant/".concat(e))};return Object(j.jsxs)("div",{className:"listcard-container",style:{backgroundImage:"linear-gradient(270deg,rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6)), url(".concat(K,")")},"data-testid":"listcard-details",role:"button",onClick:function(){return w(a)},tabIndex:0,onKeyDown:function(e){return"Enter"===e.key?w(a):null},children:[Object(j.jsxs)("div",{className:"listcard-details",children:[Object(j.jsxs)("div",{className:"details-item",children:[" ",s]}),Object(j.jsxs)("div",{className:"details-item",children:[" ",i]}),Object(j.jsxs)("div",{className:"details-item details-price-range",children:[" ","$".repeat(u)]}),Object(j.jsx)(he,{rating:parseFloat(o),color:"#dc2850"})]}),n?Object(j.jsxs)("div",{className:"listcard-button-container",children:[Object(j.jsx)("button",{"data-testid":"listcard-edit",onClick:function(e){return function(e,t){e.stopPropagation(),d.push("/restaurant/".concat(t,"/update"))}(e,a)},type:"button",className:"card-button edit-button",children:Object(j.jsx)(G.a,{fill:"#e0b90c"})}),Object(j.jsx)("button",{"data-testid":"listcard-delete",onClick:function(e){return g(e,a)},type:"button",className:"card-button delete-button",children:Object(j.jsx)(G.e,{fill:"#e00c0c"})}),Object(j.jsx)("div",{children:x})]}):null]})},Q=function(){var e,t=Object(c.useContext)(S),n=t.state,a=t.dispatch,s=Object(c.useState)(""),i=Object(O.a)(s,2),u=i[0],o=i[1];return Object(c.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a({type:r.FETCH_RESTAURANTS,payload:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsxs)("div",{className:"restaurant-list-container","data-testid":"restaurant-list",children:[n.restaurants.length>0?Object(j.jsx)("div",{className:"restaurant-list",children:null===(e=n.restaurants)||void 0===e?void 0:e.map((function(e){return Object(j.jsx)(Z,{restaurant:e,isAuth:n.user.isAuth},null===e||void 0===e?void 0:e.id)}))}):Object(j.jsx)(le,{message:"Warming up servers and loading restaurants please wait.."}),u&&Object(j.jsx)(Oe,{message:u})]})},X=(n(74),function(){var e=Object(l.g)().id,t=Object(l.f)(),n=Object(c.useState)(""),a=Object(O.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),u=Object(O.a)(i,2),o=u[0],d=u[1],p=Object(c.useState)(1),b=Object(O.a)(p,2),h=b[0],x=b[1],v=Object(c.useState)(""),g=Object(O.a)(v,2),w=g[0],y=g[1],N=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q(e);case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,s(null===a||void 0===a?void 0:a.name),d(null===a||void 0===a?void 0:a.location),x(null===a||void 0===a?void 0:a.price_range),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){N()}),[]);var S=function(){var n=Object(f.a)(m.a.mark((function n(a){var c,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),n.prev=1,!E(r,o)){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,C(e,r,o,h);case 6:if(c=n.sent,d(""),s(""),x(3),201!==c.status){n.next=13;break}return t.push("/"),n.abrupt("return");case 13:return n.next=15,c.json();case 15:i=n.sent,y(i.message),n.next=25;break;case 19:n.prev=19,n.t0=n.catch(1),y(n.t0.message),d(""),s(""),x(3);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsxs)("form",{"data-testid":"update-res-form",className:"update-restaurant-container",onSubmit:function(e){return S(e)},children:[Object(j.jsx)("input",{"data-testid":"update-res-name",onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Restaurant Name",value:r}),Object(j.jsx)("input",{"data-testid":"update-res-location",onChange:function(e){return d(e.target.value)},type:"text",placeholder:"Restaurant Location",value:o}),Object(j.jsxs)("label",{htmlFor:"restaurant-price",children:[Object(j.jsx)("p",{children:"Restaurant Price"}),h,Object(j.jsx)("input",{className:"slider","data-testid":"update-res-price",onChange:function(e){return x(parseInt(e.target.value,10))},id:"restaurant-price",type:"range",min:"1",max:"5",name:"restaurant-price",value:h})]}),w&&Object(j.jsx)(Oe,{message:w}),Object(j.jsx)("button",{type:"submit",children:"Update"})]})}),ee=(n(75),function(e){var t=e.name,n=e.rating,a=e.comment;return Object(j.jsxs)("div",{className:"review-card-container",children:[Object(j.jsxs)("div",{className:"review-card-user",children:[Object(j.jsx)("p",{children:t}),Object(j.jsx)(he,{color:"#dc2850",rating:parseInt(n,10)}),Object(j.jsx)("p",{children:(new Date).toLocaleDateString("tr-TR")})]}),Object(j.jsx)("div",{className:"review-card-comment",children:a})]})}),te=(n(76),function(){var e=Object(l.g)().id,t=Object(c.useState)([]),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(O.a)(s,2),u=i[0],o=i[1],d=Object(c.useState)(""),p=Object(O.a)(d,2),b=p[0],h=p[1],x=Object(c.useState)({name:"",location:""}),v=Object(O.a)(x,2),g=v[0],w=v[1],y=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U(e);case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,200===n.status?(r(a.reviews),h(a.average),w(a.details)):o(a.message),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),o(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){y()}),[l.g]),Object(j.jsxs)("div",{className:"restaurant-details-container",children:[Object(j.jsxs)("header",{className:"restaurant-details-header",children:[(null===g||void 0===g?void 0:g.name)?g.name:"Restaurant Name",Object(j.jsxs)("span",{style:{fontSize:"0.75rem"},children:["(",(null===g||void 0===g?void 0:g.location)?g.location:"Location",")"]})]}),b?Object(j.jsx)(he,{rating:parseInt(b,10)}):Object(j.jsx)(he,{rating:0}),Object(j.jsx)("div",{className:"restaurant-details-card-grid",children:a.map((function(e){return Object(j.jsx)(ee,{rating:e.rating,name:e.user,comment:e.comment},e.id)}))}),u&&Object(j.jsx)(Oe,{message:u}),Object(j.jsx)(ae,{})]})}),ne=(n(77),a.reviewValidation),ae=function(){var e=Object(l.g)().id,t=Object(c.useState)(""),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(O.a)(s,2),u=i[0],o=i[1],d=Object(c.useState)("5"),p=Object(O.a)(d,2),b=p[0],h=p[1],x=Object(c.useState)(""),v=Object(O.a)(x,2),g=v[0],w=v[1],y=Object(l.f)(),N=function(){var t=Object(f.a)(m.a.mark((function t(n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,ne.validateAsync({username:a,userRating:b,comment:u});case 4:return t.next=6,F(e,a,b,u);case 6:if(201!==(r=t.sent).status){t.next=10;break}return y.push("/"),t.abrupt("return");case 10:return t.next=12,r.json();case 12:c=t.sent,w(c.message),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),w(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("form",{onSubmit:function(e){return N(e)},className:"add-review-form","data-testid":"review-form",children:[Object(j.jsx)("h2",{className:"add-review-header",children:"Add Your Review"}),Object(j.jsxs)("section",{className:"input-section",children:[Object(j.jsx)("label",{htmlFor:"review-username-input",children:Object(j.jsx)("input",{"data-testid":"review-username-input",className:"add-review-username",onChange:function(e){return r(e.target.value)},type:"text",id:"review-username-input",placeholder:"Your Name",value:a})}),Object(j.jsxs)("label",{className:"add-review-label",htmlFor:"review-rating",children:[Object(j.jsx)("p",{children:"Rating"}),Object(j.jsxs)("select",{"data-testid":"review-rating-input",onBlur:function(e){return h(e.target.value)},onChange:function(e){return h(e.target.value)},className:"add-review-rating",name:"review-rating",id:"review-rating",value:b,children:[Object(j.jsx)("option",{value:"1",children:"1"}),Object(j.jsx)("option",{value:"2",children:"2"}),Object(j.jsx)("option",{value:"3",children:"3"}),Object(j.jsx)("option",{value:"4",children:"4"}),Object(j.jsx)("option",{value:"5",children:"5"})]})]}),Object(j.jsx)("label",{htmlFor:"review-comment-input",children:Object(j.jsx)("textarea",{"data-testid":"review-comment-input",onChange:function(e){return o(e.target.value)},className:"add-review-textarea",id:"review-comment-input",placeholder:"Comment Here",maxLength:100,cols:20,rows:10,value:u})})]}),Object(j.jsx)("button",{"data-testid":"add-review-button",className:"add-review-button",type:"submit",children:"Add Review"}),g&&Object(j.jsx)(Oe,{message:g})]})},re=(n(78),n(33),a.loginValidation),ce=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(O.a)(r,2),i=s[0],u=s[1],o=Object(c.useState)(""),d=Object(O.a)(o,2),p=d[0],b=d[1],x=Object(c.useContext)(S).dispatch,v=Object(l.f)();Object(c.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200!==t.status){e.next=10;break}return x({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},n),{},{isAuth:!0})}),v.push("/dashboard"),e.abrupt("return");case 10:x({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},n),{},{isAuth:!1})});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();localStorage.getItem("token")&&e()}),[]);var g=function(){var e=Object(f.a)(m.a.mark((function e(t){var r,c,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,re.validateAsync({email:n,password:i});case 4:return e.next=6,L(n,i);case 6:return r=e.sent,e.next=9,r.json();case 9:if(c=e.sent,s=c.token,o=c.user,!s){e.next=16;break}return window.localStorage.setItem("token",s),x({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},o),{},{isAuth:!0})}),Object(_.c)("Login Successful. Redirecting to Home",I((function(){return v.push("/")}))),e.abrupt("return");case 16:b(c.message),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),b(e.t0.message);case 22:return e.prev=22,a(""),u(""),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[1,19,22,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"login-form",onSubmit:function(e){return g(e)},children:[Object(j.jsx)("input",{"data-testid":"login-email",className:"email-input",type:"text",value:n,onChange:function(e){return a(e.target.value)},onFocus:function(){return b("")},placeholder:"Email"}),Object(j.jsx)("input",{"data-testid":"login-password",className:"password-input",type:"password",value:i,onChange:function(e){return u(e.target.value)},onFocus:function(){return b("")},placeholder:"Password"}),p&&Object(j.jsx)(Oe,{message:p}),Object(j.jsx)("button",{type:"submit",children:"Sign In"})]}),Object(j.jsx)(_.a,{transition:_.b})]})},se=(n(79),a.registerValidation),ie=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(O.a)(r,2),i=s[0],u=s[1],o=Object(c.useState)(""),d=Object(O.a)(o,2),p=d[0],b=d[1],x=Object(c.useState)(""),v=Object(O.a)(x,2),g=v[0],w=v[1],y=Object(c.useContext)(S).dispatch,N=Object(l.f)(),A=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,se.validateAsync({name:p,email:n,password:i});case 4:return e.next=6,P(p,n,i);case 6:return a=e.sent,e.next=9,a.json();case 9:r=e.sent,c=r.token,s=r.user,c?(window.localStorage.setItem("token",c),y({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},s),{},{isAuth:!0})}),N.push("/")):(w(r.message),u("")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message),u("");case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"register-form",onSubmit:function(e){return A(e)},children:[Object(j.jsx)("input",{className:"name-input","data-testid":"register-name",type:"text",value:p,onChange:function(e){return b(e.target.value)},onFocus:function(){return w("")},placeholder:"Name"}),Object(j.jsx)("input",{className:"email-input","data-testid":"register-email",type:"text",value:n,onChange:function(e){return a(e.target.value)},onFocus:function(){return w("")},placeholder:"Email"}),Object(j.jsx)("input",{className:"password-input","data-testid":"register-password",type:"password",value:i,onChange:function(e){return u(e.target.value)},onFocus:function(){return w("")},placeholder:"Password"}),g&&Object(j.jsx)(Oe,{message:g}),Object(j.jsx)("button",{type:"submit",children:"Sign Up"})]}),Object(j.jsx)(_.a,{transition:_.b})]})},ue=function(e){var t=e.name,n=e.email;return Object(j.jsxs)("div",{children:["Welcome ",t," . ",n]})},oe=n.p+"static/media/loading.df0fb781.svg",le=function(e){var t=e.message;return Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:oe,alt:"loading"}),Object(j.jsx)("p",{children:t})]})},de=(n(80),function(){var e=Object(c.useContext)(S).state;return Object(j.jsxs)("div",{className:"navigation-bar-container",children:[Object(j.jsx)("section",{className:"nav-section-logo",children:Object(j.jsx)(o.b,{to:"/",children:Object(j.jsx)(G.f,{size:30,fill:"rgb(220, 40, 80)"})})}),Object(j.jsx)("section",{className:"nav-section-links",children:e.user.isAuth?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.b,{to:"/dashboard",children:"Dashboard"}),Object(j.jsx)("button",{onClick:function(){window.localStorage.removeItem("token"),window.location.assign("/pelp")},type:"button",children:"Logout"})]}):Object(j.jsx)(o.b,{to:"/auth/signin",children:"Sign in"})})]})}),je=(n(81),n.p+"static/media/twitter-logo.948a7997.svg"),pe=n.p+"static/media/linkedin-logo.5fe87bbd.svg",be=function(){return Object(j.jsxs)("footer",{className:"footer-container",children:[Object(j.jsx)("a",{href:"https://twitter.com/filthycoder",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("img",{className:"footer-link-image",src:je,alt:"twitter"})}),Object(j.jsx)("a",{href:"https://www.linkedin.com/in/turkaytunc/",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("img",{className:"footer-link-image",src:pe,alt:"linkedin"})}),Object(j.jsxs)("div",{className:"footer-copy",children:[" \xa9 ",(new Date).getFullYear()," T\xfcrkay Tun\xe7"]})]})},me=(n(82),function(e){for(var t=e.rating,n=e.color,a=[],r=1;r<=5;r+=1)r<=t?a.push(Object(j.jsx)(G.c,{className:"star",fill:n},"".concat(r))):r!==Math.ceil(t)||Number.isInteger(t)?a.push(Object(j.jsx)(G.b,{className:"star"},"".concat(r))):a.push(Object(j.jsx)(G.d,{"data-testid":"half-star",className:"star",fill:n},r+5));return Object(j.jsx)("div",{children:a})}),he=me;me.defaultProps={color:"yellow"};n(83);var fe=function(e){var t=e.message,n=e.messageColor;return Object(j.jsx)("div",{className:"display-error-container",style:{backgroundColor:"".concat(n)},children:t})};fe.defaultProps={messageColor:"#444"};var Oe=fe,xe=(n(84),function(){var e=Object(c.useContext)(S),t=e.state,n=e.dispatch,a=Object(c.useState)(""),r=Object(O.a)(a,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:return a=e.sent,e.next=6,a.json();case 6:if(r=e.sent,200!==a.status){e.next=10;break}return n({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},r),{},{isAuth:!0})}),e.abrupt("return");case 10:n({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},t.user),{},{isAuth:!1})}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),i("An Error Occured");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();localStorage.getItem("token")&&e()}),[]),Object(j.jsxs)("div",{className:"home-screen","data-testid":"home-screen-container",children:[Object(j.jsx)(p,{}),t.user.isAuth&&Object(j.jsx)($,{}),Object(j.jsx)(Q,{}),s&&Object(j.jsx)(Oe,{message:s})]})}),ve=(n(85),function(){return Object(j.jsx)("div",{className:"details-screen-container",children:Object(j.jsx)(te,{})})}),ge=(n(86),function(){return Object(j.jsxs)("div",{className:"update-screen",children:[Object(j.jsx)("header",{children:"Update Restaurant"}),Object(j.jsx)(X,{})]})}),we=(n(87),function(){return Object(j.jsxs)("div",{className:"signin-screen",children:[Object(j.jsx)(ce,{}),Object(j.jsxs)("div",{className:"signup-link-container",children:[Object(j.jsx)("span",{children:"No account?"}),Object(j.jsx)(o.b,{to:"/auth/signup",children:"Create one"})]})]})}),ye=(n(88),function(){return Object(j.jsxs)("div",{className:"signup-screen",children:[Object(j.jsx)(ie,{}),Object(j.jsxs)("div",{className:"signin-link-container",children:[Object(j.jsx)("span",{children:"Already have an account?"}),Object(j.jsx)(o.b,{to:"/auth/signin",children:"Sign in"})]})]})}),Ne=function(){var e=Object(c.useContext)(S),t=e.state,n=e.dispatch,a=Object(c.useState)(""),r=Object(O.a)(a,2),s=r[0],i=r[1],u=Object(l.f)();return Object(c.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:return t=e.sent,e.next=6,t.json();case 6:if(a=e.sent,200!==t.status){e.next=10;break}return n({type:"ADD_USER",payload:Object(h.a)(Object(h.a)({},a),{},{isAuth:!0})}),e.abrupt("return");case 10:u.push("/auth/signin"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),i(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();localStorage.getItem("token")?e():u.push("/auth/signin")}),[]),Object(j.jsxs)("div",{children:[t.user.isAuth&&Object(j.jsx)(ue,{name:t.user.name,email:t.user.email}),s]})};var Se=function(){return Object(j.jsx)(o.a,{basename:"/pelp",children:Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(de,{}),Object(j.jsx)("div",{className:"main",children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",component:xe}),Object(j.jsx)(l.a,{exact:!0,path:"/dashboard",component:Ne}),Object(j.jsx)(l.a,{exact:!0,path:"/restaurant/:id/update",component:ge}),Object(j.jsx)(l.a,{exact:!0,path:"/restaurant/:id",component:ve}),Object(j.jsx)(l.a,{exact:!0,path:"/auth/signup",component:ye}),Object(j.jsx)(l.a,{exact:!0,path:"/auth/signin",component:we})]})}),Object(j.jsx)(be,{})]})})};u.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(A,{children:Object(j.jsx)(Se,{})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.c2fa0a1e.chunk.js.map